{"version":3,"file":"static/webpack/static/development/pages/index.js.d272117126efe4087281.hot-update.js","sources":["webpack:///./components/CreateWoman.js","webpack:///./components/Women.js","webpack:///./components/WomenList.js","webpack:///./components/helpers/index.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport Router from \"next/router\";\nimport Form from \"./styles/Form\";\nimport Error from \"./ErrorMessage\";\nimport { ALL_WOMEN_QUERY } from \"./Women\";\nimport { setBodyHeight } from \"./helpers\";\n\nconst CREATE_WOMAN_MUTATION = gql`\n  mutation CREATE_WOMAN_MUTATION($name: String!) {\n    createWoman(name: $name) {\n      name\n      id\n    }\n  }\n`;\n\nclass CreateWoman extends Component {\n  state = {\n    name: \"Name Here\"\n  };\n  handleChange = e => {\n    const { name, type, value } = e.target;\n    const val = type === \"number\" ? parseFloat(value) : value;\n    this.setState({ [name]: val });\n  };\n  render() {\n    return (\n      <Mutation mutation={CREATE_WOMAN_MUTATION} variables={this.state}>\n        {(createWoman, { loading, error }) => (\n          <Form\n            onSubmit={async e => {\n              // Stop the form from submitting\n              e.preventDefault();\n              // call the mutation\n              const res = await createWoman({\n                refetchQueries: [\n                  {\n                    query: ALL_WOMEN_QUERY\n                  }\n                ]\n              });\n              // change them to the single item page\n              console.log(res);\n              // set height of body again based on new item added\n              setBodyHeight();\n              this.setState({ name: \"Name Goes Here\" });\n            }}\n          >\n            <Error error={error} />\n            <fieldset disabled={loading} aria-busy={loading}>\n              <div className=\"wrapper\">\n                <label htmlFor=\"title\">\n                  Name\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    placeholder=\"Name Goes Here\"\n                    required\n                    value={this.state.name}\n                    onChange={this.handleChange}\n                  />\n                </label>\n                <button type=\"submit\">Submit</button>\n              </div>\n            </fieldset>\n          </Form>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default CreateWoman;\nexport { CREATE_WOMAN_MUTATION };\n","import React, { Component, Fragment } from \"react\";\nimport { Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Woman from \"./Woman\";\nimport CreateWoman from \"./CreateWoman\";\nimport ThreeWomen from \"./ThreeWomen\";\nimport WomenList from \"./WomenList\";\nimport { Manifesto } from \"./Manifesto\";\n\nconst ALL_WOMEN_QUERY = gql`\n  query ALL_WOMEN_QUERY {\n    women {\n      id\n      name\n      description\n    }\n  }\n`;\n\nconst Center = styled.div`\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  perspective: 150px;\n  top: 0;\n  left: 0;\n`;\n\nconst ManifestoWrapper = styled.button`\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.8);\n  display: ${props => (props.display ? \"block\" : \"none\")};\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 100;\n\n  .module {\n    width: 70%;\n    height: 70%;\n    color: white;\n    background: black;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    padding: 50px;\n    margin: 0 auto;\n  }\n\n  h1 {\n    color: ${props => props.theme.green};\n  }\n`;\n\nconst calcX = x => {\n  if (typeof window === \"undefined\") {\n    return 0;\n  } else {\n    if (x) {\n      const center = window.innerWidth / 2;\n      const distFromCenter = x - center;\n\n      const decimal = distFromCenter / center;\n\n      // number between .7 and .9\n      const randVal = Math.floor(decimal * 0.9) + 0.7;\n\n      // console.log((x - window.innerWidth / 2) / 100);\n\n      return (x - window.innerWidth / 2) / 100;\n    }\n  }\n};\n\nconst calcY = y => {\n  if (typeof window === \"undefined\") {\n    return 0;\n  } else {\n    if (y) {\n      const center = window.innerHeight / 2;\n      const distFromCenter = y - center;\n\n      const matrix3DVal = (distFromCenter * 0.67) / center;\n\n      return distFromCenter;\n    } else return 0;\n  }\n};\n\nconst calcMatrix3D1 = y => {\n  if (typeof window === \"undefined\") {\n    return 0;\n  } else {\n    if (y) {\n      const center = window.innerHeight / 2;\n      const distFromCenter = y - center;\n\n      const matrix3DVal = (distFromCenter * 0.5) / center;\n\n      // console.log({ center, distFromCenter, matrix3DVal });\n\n      return matrix3DVal;\n    } else return 0;\n  }\n};\n\nconst calcMatrix3D2 = y => {\n  if (typeof window === \"undefined\") {\n    return 0;\n  } else {\n    if (y) {\n      const center = window.innerHeight / 2;\n      const absFromCenter = Math.abs(y - center);\n\n      const a = 0.99;\n      const b = 0.74;\n      const min = 0;\n      const max = center;\n      const x = absFromCenter;\n\n      const scaled = ((b - a) * (x - min)) / (max - min) + a;\n      // console.log({ scaled });\n\n      return scaled;\n    } else return 0;\n  }\n};\n\nclass Women extends Component {\n  state = {\n    x: null,\n    y: null,\n    displayManifesto: true\n  };\n\n  _onMouseMove = e => {\n    this.setState({\n      x: calcX(e.clientX),\n      y: calcY(e.clientY),\n      matrix3DVal1: calcMatrix3D1(e.clientY),\n      matrix3DVal2: calcMatrix3D2(e.clientY)\n    });\n  };\n\n  _closeManifesto = () => {\n    this.setState({ displayManifesto: false });\n  };\n\n  render() {\n    return (\n      <Center onMouseMove={this._onMouseMove}>\n        {/* <ManifestoWrapper\n          display={this.state.displayManifesto}\n          onClick={this._closeManifesto}\n        >\n          <div className=\"module\">\n            <h1>\n              <em>Today is International Woman's Day.</em>\n            </h1>\n            <p>\n              Why is this day important? Lorem ipsum dolor sit amet, consectetur\n              adipiscing elit, sed do eiusmod tempor incididunt ut labore et\n              dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n              exercitation ullamco laboris nisi ut aliquip ex ea commodo\n              consequat. Duis aute irure dolor in reprehenderit in voluptate\n              velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint\n              occaecat cupidatat non proident, sunt in culpa qui officia\n              deserunt mollit anim id est laborum.\n            </p>\n          </div>\n        </ManifestoWrapper> */}\n\n        <Query query={ALL_WOMEN_QUERY} refetch={true}>\n          {({ data, error, loading }) => {\n            if (loading) return <p>Loading...</p>;\n            if (error) return <p>Error: {error.message}</p>;\n            return (\n              <Fragment>\n                {/* <ThreeWomen women={data.women} /> */}\n                <WomenList\n                  women={data.women}\n                  x={this.state.x}\n                  y={this.state.y}\n                  matrix3DVal1={this.state.matrix3DVal1}\n                  matrix3DVal2={this.state.matrix3DVal2}\n                />\n                <CreateWoman />\n              </Fragment>\n            );\n          }}\n        </Query>\n      </Center>\n    );\n  }\n}\n\nexport default Women;\nexport { ALL_WOMEN_QUERY };\n","import React, { Component, Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport * as _ from \"lodash\";\nimport {\n  WomenListWrap,\n  Container,\n  ContainerTop,\n  InnerWrap\n} from \"./styles/WomenList\";\nimport Share from \"./Share\";\nimport { setBodyHeight } from \"./helpers\";\n\nclass WomenList extends Component {\n  state = {\n    scrollTop: 0,\n    newlyAddedItem: null\n  };\n\n  componentDidMount() {\n    if (typeof window === \"undefined\") {\n      return 0;\n    } else if (typeof window != \"undefined\") {\n      document.body.scrollTop = 0;\n      this.setState({ scrollTop: 0 });\n      setBodyHeight();\n      document.addEventListener(\"scroll\", this._throttleScroll);\n      window.addEventListener(\"resize\", setBodyHeight);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.women.length !== this.props.women.length) {\n      setBodyHeight();\n      console.log(\"a new woman has been added to the list.\");\n      console.log(this.props.women[this.props.women.length - 1]);\n\n      const newElId = document.getElementById(\"womanList\").lastChild.id;\n      const newlyAddedItem = {\n        name: this.props.women[this.props.women.length - 1].name,\n        id: newElId\n      };\n\n      console.log({ newElId });\n      this.setState({ newlyAddedItem });\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: \"smooth\"\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof window === \"undefined\") {\n      return 0;\n    } else if (typeof window != \"undefined\") {\n      document.removeEventListener(\"scroll\", this._throttleScroll);\n    }\n  }\n\n  _onScroll = e => {\n    // console.log(this.state.scrollTop);\n    const bodyScrollTop =\n      window.pageYOffset !== undefined\n        ? window.pageYOffset\n        : (\n            document.documentElement ||\n            document.body.parentNode ||\n            document.body\n          ).scrollTop;\n    if (bodyScrollTop > 5) {\n      console.log(\"runningonScroll\");\n\n      this.setState({ scrollTop: bodyScrollTop });\n    }\n  };\n\n  _throttleScroll = _.throttle(this._onScroll, 100);\n\n  render() {\n    if (this.props.women) {\n      const allWomen = this.props.women.map((woman, index) => {\n        //  TODO: clean up ids - how to deal with duplicates?\n\n        const personId =\n          woman.name\n            .replace(/[^a-zA-Z ]/g, \"\")\n            .split(\" \")\n            .join(\"\") + index;\n\n        // console.log(personId);\n        return (\n          <div id={personId} className=\"womanItem\" key={woman.id}>\n            <h1>{woman.name}</h1>\n          </div>\n        );\n      });\n\n      const containers = (\n        <Fragment>\n          <WomenListWrap\n            style={{\n              transform: `skew(${this.props.x * 2}deg)`\n            }}\n          >\n            <Container\n              style={{\n                //   transform: `rotateX(${this.props.y * -1}deg)`\n                transformOrigin: `bottom center`,\n                transform: `matrix3d(\n                1,\n                0,\n                0,\n                0,\n                0,\n                ${this.props.matrix3DVal2},\n                ${this.props.matrix3DVal1},\n                0,\n                0,\n                ${this.props.matrix3DVal1 * -1},\n                ${this.props.matrix3DVal2},\n                0,\n                0,\n                0,\n                0,\n                1\n              )`\n              }}\n            >\n              <InnerWrap\n                order={0}\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                id=\"womanList\"\n                className=\"womenWrapper\"\n              >\n                {allWomen}\n              </InnerWrap>\n            </Container>\n            <Container>\n              <InnerWrap\n                style={{\n                  position: `relative`,\n                  zIndex: `10`,\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                order={1}\n                className=\"womenWrapper\"\n              >\n                {allWomen}\n              </InnerWrap>\n            </Container>\n            <Container\n              // transform: matrix3d(1, 0, 0, 0, 0, 0.740218, -0.672367, 0, 0, 0.672367, 0.740218, 0, 0, 0, 0, 1);\n              style={{\n                //   transform: `rotateX(${this.props.y * -1}deg)`\n                transformOrigin: `top center`,\n                transform: `matrix3d(\n                  1,\n                  0,\n                  0,\n                  0,\n                  0,\n                  ${this.props.matrix3DVal2},\n                  ${this.props.matrix3DVal1},\n                  0,\n                  0,\n                  ${this.props.matrix3DVal1 * -1},\n                  ${this.props.matrix3DVal2},\n                  0,\n                  0,\n                  0,\n                  0,\n                  1\n                )`\n              }}\n            >\n              <InnerWrap\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                order={2}\n                className=\"womenWrapper\"\n              >\n                {allWomen}\n              </InnerWrap>\n            </Container>\n          </WomenListWrap>\n          <Share woman={this.state.newlyAddedItem} />\n        </Fragment>\n      );\n\n      return containers;\n    } else return null;\n  }\n}\n\n// Set default props\nWomenList.defaultProps = {\n  x: 0,\n  y: 0,\n  matrix3DVal1: 0.18,\n  matrix3DVal2: 0.89\n};\n\nexport default WomenList;\n","export const setBodyHeight = () => {\n  if (typeof window === \"undefined\") {\n    return 0;\n  } else if (typeof window != \"undefined\") {\n    if (document.getElementById(\"womanList\")) {\n      console.log(\"set body height is running\");\n      const womanListHeight = document.getElementById(\"womanList\").offsetHeight;\n      // Added 100px to the bottom for padding -\n      // TODO: adjust for responsive\n      // calculate half of window height and add to women's list\n      const halfHeight = window.innerHeight / 2.5;\n\n      document.body.style.height = womanListHeight + halfHeight + \"px\";\n    }\n  }\n};\n"],"mappings":"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","sourceRoot":""}